//api entry point
const   express				    = require('express'),
        router 					= express.Router();
const   Main                    = require('./main');


router.post('/data', function(req, res) {
    try { Main.createCall(req, res, 
        data => {res.send(data)});
    } catch(err){ 
        res.send({success: false, data: 'error: ' + err});
    }
});

router.get('/data', function(req, res) { 
    try { Main.getAll(req, res, 
        data => {res.send(data)});
    } catch(err){ 
        res.send({success: false, data: 'error: ' + err});
    }
});


router.get('/data/:by/:id', function(req, res) { 
    try { Main.getBy(req, res, 
        data => {res.send(data)});
    } catch(err){ 
        res.send({success: false, data: 'error: ' + err});
    }
}); 

router.patch('/data', function(req, res) { 
    try { Main.updateCall(req, res,
        data => {res.send(data)});
    } catch(err) { 
        res.send({success: false, data: 'function not found ' + err});
    };
});

router.delete('/data', function(req, res) { 
    try { Main.deleteCall(req, res,
        data => {res.send(data)});
    } catch(err) { 
        res.send({success: false, data: 'function not found ' + err});
    };
});

module.exports                      = router;